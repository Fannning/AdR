---
title: "Assignment 1"
author: "Ning Fan"
date: 19 June, 2024
format:
  beamer:
    theme: "Antibes"
    colortheme: "dolphin"
---

```{r}
library(data.table)
```

## 1. Use data.table to read in the data and assign the correct class to the variables.

```{r Convert}
#| echo: true
chn <- fread("hdro_indicators_chn.csv")
irl <- fread("hdro_indicators_irl.csv")
#show the data for first 2 rows with some selected columns
chn[1:2,c(1,7,8)]
```

\vspace{4mm}

As we see from the output, first row needs to be removed. Variables *value* and *year* should be converted to numeric class.

## 

```{r}
#| echo: true
#remove the first row in both tables 
chn <- chn[-1,]
irl <- irl[-1,]

#all variables have class character. 
#convert variable value and year to numeric
chn[, value:=as.numeric(value)]
chn[, year:=as.numeric(year)]
irl[, value:=as.numeric(value)]
irl[, year:=as.numeric(year)]
```

## 

```{r}
#print the result from above
#only include selected columns for neater presentation
chn[,c("country_code","index_id","value","year")]
```

\vspace{4mm}

Take China data for example, the variable class has been converted succesfully and first row is removed.


## 2. Merge the data datasets using data.table

```{r Merge}
#| echo: true
#combine the data together as they share same column names
dt <- merge(chn,irl,all = TRUE) 
#only include selected columns for neater presentation
print(dt[,c("country_code","index_id","value","year")]
      ,topn = 2)
```

## 3. Do some quick data exploration to know more about your data.

```{r}
#| echo: true
max(dt[country_code=="CHN","year"])
min(dt[country_code=="CHN","year"])

max(dt[country_code=="IRL","year"])
min(dt[country_code=="IRL","year"])
```

\vspace{2mm}

Data recorded in both dataset are ranged between 1990-2022

## 

How many different indicators for each indexX?
\vspace{2mm}

```{r}
#| echo: true
#filter out the unique rows of indicator
index_indicator <- unique(dt[,
              c("index_id","indicator_id")])
#calculate the number of indicators, by index
index_indicator[,.N, keyby=index_id]
```

##
- Index GDI (Gender Development Index) has the most number of indicators recorded (11)

- Index PHDI (Planetary pressures--adjusted Human Development Index) has least indicators recorded (4)

## 4.1  Gender Inequality Index

\vspace{2mm}
```{r Analysis}
#| echo: true
dt[(indicator_id=="abr"|indicator_id=="lfpr_f") & 
     (year=="2022"|year=="2000"),.(country_code, value)
   , keyby = .(indicator_id, year)]
```

##

```{r}
#| echo: true
dt[(indicator_id=="pr_f"|indicator_id=="se_f" 
    | indicator_id=="gii_rank") & 
     (year=="2022"|year=="2000"),.(country_code, value)
   , keyby = .(indicator_id, year)]
```

## 

For Gender Inequality Index, in 2022 CHN is ranking after IRL. For the selected 4 indicators, IRL outperformed on all in year 2022. However, back to year 2000, CHN had a better figure on *Adolescent Birth Rate*, *Labour force participation rate (female)*, *Share of seats in parliament (female)*. 

## 4.2  Planetary pressures--adjusted Human Development Index

```{r Analysis 2}
#| echo: true
dt[(indicator_id=="co2_prod"|indicator_id=="mf") & 
     (year=="2022"|year=="1990"),.(country_code, value)
   , keyby = .(indicator_id,year)]
```

## 

For Planetary pressures--adjusted Human Development Index, CHN has much lower *Material footprint (per capita)* and *Carbon dioxide emissions (per capita)* in year 1990. However, this number increased to almost same level as IRL in 2022, while CHN is higher than IRL on *Carbon dioxide emissions (per capita)*.


## 5. Do at least 2 plots using some output from the analysis done in step 4.

I'd like to examine the trend of two indicators for each country. 

\vspace{4mm}

-   Share of seats in parliament, female (% held by women)

-   Carbon dioxide emissions per capita (production) (tonnes)

## 

-   Share of seats in parliament, female (% held by women)

```{r plot 1 Share of seats in parliament female}
#| echo: true
#| results: hide
#| fig-show: hide
#get the data for each country
dt_chn_plot1 <- dt[indicator_id=="pr_f" 
      & country_code=="CHN",.(value), keyby = .(year)]
dt_irl_plot1 <-dt[indicator_id=="pr_f" & year>1997 
      & country_code=="IRL",.(value), keyby = .(year)]
#select year 1998-2022 as data for CHN is N/A before 1998
x<-c(1998:2022)
#plot
plot(x,dt_chn_plot1$value, type = "l", col="chocolate",
     ylim =c(10,30),ylab = "% held by women", xlab ="year")
lines(x,dt_irl_plot1$value, type = "l", col="chartreuse4")
#add legend and title
legend(x="bottomright", legend = c("China","Ireland")
       , col = c("chocolate","chartreuse4"),lty = c(1,1))
title("Share of seats in parliament, female")
```

##
```{r}
plot(c(1998:2022),dt_chn_plot1$value, type = "l", col="chocolate",
     ylim =c(10,30),ylab = "% held by women", xlab ="year")
lines(c(1998:2022),dt_irl_plot1$value, type = "l", col="chartreuse4")
legend(x="bottomright", legend = c("China","Ireland"), col = c("chocolate","chartreuse4"),lty = c(1,1))
title("Share of seats in parliament, female")
```

##
There's a gradual increase in female share of seats in parliament for Ireland during the 25 years. China only shows a slight increase in the female shares over the time period. Ireland performed poorly in the early time however it overtook China in year 2016 and after year 2020. 

## 

-   Carbon dioxide emissions per capita (production) (tonnes)

```{r plot 2 Carbon dioxide emissions per capita (production)}
#| echo: true
#| results: hide
#| fig-show: hide
#get the data for each country
dt_chn_plot2 <- dt[indicator_id=="co2_prod" 
       & country_code=="CHN",.(value), keyby = .(year)]
dt_irl_plot2 <-dt[indicator_id=="co2_prod" 
       & country_code=="IRL",.(value), keyby = .(year)]
x <- c(1990:2022)
#plot
plot(x,dt_chn_plot2$value, type = "l",col="chocolate",
     ylim =c(1,13),ylab = "tonnes", xlab ="year")
lines(x,dt_irl_plot2$value, type = "l", col="chartreuse4")
#add legend and title
legend(x="bottomright", legend = c("China","Ireland")
       , col = c("chocolate","chartreuse4"),lty = c(1,1))
title("Carbon dioxide emissions per capita")
```

##
```{r}
plot(c(1990:2022),dt_chn_plot2$value, type = "l",col="chocolate",
     ylim =c(1,13),ylab = "tonnes", xlab ="year")
lines(c(1990:2022),dt_irl_plot2$value, type = "l", col="chartreuse4")
legend(x="bottomright", legend = c("China","Ireland")
       , col = c("chocolate","chartreuse4"),lty = c(1,1))
title("Carbon dioxide emissions per capita")
```

##
China had a very low level of carbon dioxide emissions in 1990, while the level for Ireland is almost 4 times higher. During the decades, CO2 emissions for China kept increasing, while for Ireland it reached the peak in year 2000 then shows a significant decrease. In year 2022, Ireland has lower carbon dioxide emissions (per capita) than China. 

